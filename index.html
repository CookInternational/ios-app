<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Cook International Casino — PWA</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#020617" />

  <!-- PWA manifest + icons -->
  <link rel="manifest" href="/manifest.webmanifest" />
  <link rel="icon" type="image/png" sizes="192x192" href="/cook-international-casino-icon-192.png" />
  <link rel="apple-touch-icon" sizes="192x192" href="/cook-international-casino-icon-192.png" />
  <link rel="apple-touch-icon" sizes="512x512" href="/cook-international-casino-icon-512.png" />

  <style>
    :root {
      --bg: #020617;
      --bg-soft: #0b1020;
      --accent: #facc15;
      --accent-soft: #fbbf24;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --border: rgba(148, 163, 184, 0.5);
      --danger: #ef4444;
      --nav-height: 56px;
    }

    * {
      box-sizing: border-box;
    }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #111827, #020617 55%, #020617 100%);
      color: var(--text);
    }

    body {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    .app-shell {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    /* Header & nav */
    .app-header {
      height: var(--nav-height);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 16px;
      border-bottom: 1px solid rgba(15, 23, 42, 0.95);
      background: radial-gradient(circle at top, rgba(8, 47, 73, 0.85), rgba(15, 23, 42, 0.98));
      box-shadow: 0 14px 30px rgba(0, 0, 0, 0.8);
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: #fef3c7;
    }

    .brand-logo {
      width: 26px;
      height: 26px;
      border-radius: 999px;
      overflow: hidden;
      border: 1px solid rgba(250, 204, 21, 0.6);
      box-shadow: 0 0 16px rgba(250, 204, 21, 0.8);
      background: radial-gradient(circle at 30% 20%, #fbbf24, #92400e);
    }

    .brand-logo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .app-nav {
      display: flex;
      gap: 8px;
    }

    .app-nav a {
      position: relative;
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 11px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: var(--text);
      text-decoration: none;
      border: 1px solid transparent;
      cursor: pointer;
      white-space: nowrap;
    }

    .app-nav a:hover {
      border-color: rgba(148, 163, 184, 0.9);
      background: rgba(15, 23, 42, 0.96);
    }

    .app-nav a.active {
      border-color: rgba(250, 204, 21, 0.9);
      background: radial-gradient(circle at 0% 0%, #facc15, #f97316);
      color: #111827;
    }

    @media (max-width: 720px) {
      .app-header {
        flex-wrap: wrap;
        height: auto;
        padding-top: 8px;
        padding-bottom: 8px;
        gap: 6px;
      }

      .app-nav {
        width: 100%;
        justify-content: space-between;
        flex-wrap: wrap;
      }

      .app-nav a {
        flex: 1 1 calc(50% - 4px);
        text-align: center;
      }
    }

    /* Main layout */
    .app-main {
      flex: 1;
      padding: 16px 14px 20px;
      max-width: 1200px;
      width: 100%;
      margin: 0 auto;
    }

    .app-card {
      border-radius: 24px;
      padding: 18px 16px 20px;
      background:
        radial-gradient(circle at top left, rgba(37, 99, 235, 0.24), rgba(15, 23, 42, 0.98));
      border: 1px solid var(--border);
      box-shadow: 0 20px 40px rgba(15, 23, 42, 0.9);
    }

    .app-view {
      display: none;
    }

    .app-view.active {
      display: block;
    }

    .app-view h1 {
      font-size: 20px;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      margin: 0 0 8px;
    }

    .app-view p {
      font-size: 14px;
      margin: 0 0 6px;
      color: rgba(209, 213, 219, 0.96);
    }

    /* Footer */
    .app-footer {
      border-top: 1px solid rgba(15, 23, 42, 0.95);
      background: #020617;
      padding: 10px 16px 12px;
      font-size: 11px;
      color: var(--muted);
    }

    .footer-inner {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
    }

    .footer-legal {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      font-size: 10px;
      letter-spacing: 0.16em;
      text-transform: uppercase;
    }

    .footer-legal a {
      color: #bfdbfe;
      text-decoration: none;
      cursor: pointer;
    }

    .footer-legal a:hover {
      text-decoration: underline;
    }

    .footer-credit a {
      color: #facc15;
      text-decoration: none;
    }

    .footer-credit a:hover {
      text-decoration: underline;
    }

    /* 21+ age gate overlay */
    .age-gate-overlay {
      position: fixed;
      inset: 0;
      background: radial-gradient(circle at top, rgba(15, 23, 42, 0.98), #020617);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 999;
      padding: 18px;
    }

    .age-gate-overlay.hidden {
      display: none;
    }

    .age-gate-card {
      max-width: 420px;
      width: 100%;
      border-radius: 24px;
      padding: 20px 18px 18px;
      background:
        radial-gradient(circle at top, rgba(30, 64, 175, 0.38), rgba(15, 23, 42, 0.98));
      border: 1px solid rgba(148, 163, 184, 0.8);
      box-shadow:
        0 24px 60px rgba(0, 0, 0, 0.96),
        0 0 0 1px rgba(15, 23, 42, 1);
    }

    .age-gate-title {
      font-size: 18px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      margin-bottom: 6px;
      color: #fef3c7;
    }

    .age-gate-sub {
      font-size: 13px;
      color: rgba(209, 213, 219, 0.98);
      margin-bottom: 12px;
    }

    .age-gate-sub strong {
      color: #fde68a;
    }

    .age-gate-form-row {
      display: flex;
      gap: 8px;
      margin-bottom: 8px;
    }

    .age-gate-field {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .age-gate-field label {
      font-size: 11px;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: var(--muted);
    }

    .age-gate-field input,
    .age-gate-field select {
      border-radius: 999px;
      border: 1px solid rgba(55, 65, 81, 0.95);
      background: rgba(15, 23, 42, 0.96);
      color: var(--text);
      font-size: 13px;
      padding: 6px 10px;
      outline: none;
    }

    .age-gate-field input:focus,
    .age-gate-field select:focus {
      border-color: rgba(56, 189, 248, 0.9);
      box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.7);
    }

    .age-gate-cert {
      margin: 10px 0;
      font-size: 12px;
      color: rgba(209, 213, 219, 0.96);
    }

    .age-gate-cert input[type="checkbox"] {
      margin-right: 6px;
    }

    .age-gate-button {
      width: 100%;
      margin-top: 4px;
      border-radius: 999px;
      border: 1px solid rgba(15, 23, 42, 1);
      background: radial-gradient(circle at 0% 0%, #facc15, #f97316);
      color: #111827;
      font-weight: 700;
      font-size: 12px;
      padding: 8px 12px;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      cursor: pointer;
      box-shadow:
        0 16px 32px rgba(15, 23, 42, 0.98),
        0 0 0 1px rgba(0, 0, 0, 1);
    }

    .age-gate-button:hover {
      filter: brightness(1.05);
    }

    .age-gate-error {
      margin-top: 8px;
      font-size: 12px;
      color: var(--danger);
      min-height: 16px;
    }

    .age-gate-legal {
      margin-top: 12px;
      font-size: 11px;
      color: rgba(156, 163, 175, 0.98);
    }

    .age-gate-legal strong {
      color: #fca5a5;
    }

    /* Small helper text for placeholders */
    .placeholder-note {
      margin-top: 10px;
      padding: 8px 10px;
      border-radius: 12px;
      font-size: 12px;
      color: var(--muted);
      background: rgba(15, 23, 42, 0.8);
      border: 1px dashed rgba(148, 163, 184, 0.6);
    }
  </style>
</head>
<body>
  <!-- 21+ DOB Gate -->
  <div id="age-gate-overlay" class="age-gate-overlay">
    <div class="age-gate-card">
      <div class="age-gate-title">Age &amp; Eligibility Check</div>
      <div class="age-gate-sub">
        To access <strong>Cook International Casino</strong>, you must be
        <strong>21 years of age or older</strong> and located in a jurisdiction
        where online gaming is legally permitted.
      </div>

      <form id="age-gate-form">
        <div class="age-gate-form-row">
          <div class="age-gate-field">
            <label for="dob-month">Month</label>
            <select id="dob-month" required>
              <option value="">MM</option>
              <option value="1">01</option>
              <option value="2">02</option>
              <option value="3">03</option>
              <option value="4">04</option>
              <option value="5">05</option>
              <option value="6">06</option>
              <option value="7">07</option>
              <option value="8">08</option>
              <option value="9">09</option>
              <option value="10">10</option>
              <option value="11">11</option>
              <option value="12">12</option>
            </select>
          </div>
          <div class="age-gate-field">
            <label for="dob-day">Day</label>
            <input id="dob-day" type="number" min="1" max="31" placeholder="DD" required />
          </div>
          <div class="age-gate-field">
            <label for="dob-year">Year</label>
            <input id="dob-year" type="number" min="1900" max="2100" placeholder="YYYY" required />
          </div>
        </div>

        <div class="age-gate-cert">
          <label>
            <input type="checkbox" id="dob-cert-checkbox" required />
            I certify that I am at least 21 years of age, not on any exclusion or
            self-exclusion list, and that online play is permitted in my jurisdiction.
          </label>
        </div>

        <button type="submit" class="age-gate-button">Enter Casino</button>
        <div id="age-gate-error" class="age-gate-error"></div>

        <div class="age-gate-legal">
          <strong>Important:</strong> You may be asked to provide documentation to verify
          age, identity, and eligibility before withdrawals are processed.
        </div>
      </form>
    </div>
  </div>

  <!-- App shell -->
  <div class="app-shell">
    <header id="app-header" class="app-header">
      <div class="brand">
        <div class="brand-logo">
          <img src="/cook-international-casino-icon-192.png" alt="Cook International Casino" />
        </div>
        <span>Cook International Casino</span>
      </div>
      <nav class="app-nav">
        <a href="#player-account" data-route-link="player-account" class="active">Player Account</a>
        <a href="#vip-lounge" data-route-link="vip-lounge">VIP Lounge</a>
        <a href="#slots" data-route-link="slots">Slots</a>
        <a href="#race-track" data-route-link="race-track">Race Track</a>
      </nav>
    </header>

    <main id="app-main" class="app-main">
      <!-- Player Account view (Stage 1 placeholder) -->
      <section id="view-player-account" class="app-view active" data-route="player-account">
        <div class="app-card">
          <h1>Player Account</h1>
          <p>
            This is the Player Account home screen. On first login, this is the
            default landing page after you pass the 21+ gate.
          </p>
          <p class="placeholder-note">
            Stage 1: placeholder view. In the next stage we will paste in your full
            Player Account source code (including login, shared wallet, and account
            management) directly into this section.
          </p>
        </div>
      </section>

      <!-- VIP Lounge view (Stage 1 placeholder; we will drop your full VIP block here) -->
      <section id="view-vip-lounge" class="app-view" data-route="vip-lounge">
        <div class="app-card">
          <h1>VIP Lounge</h1>
          <p>
            Exclusive VIP tables, high-limit games, and High Roller experiences.
          </p>
          <p class="placeholder-note">
            Stage 1: placeholder view. In the next stage, we will replace this block
            with your full VIP Lounge code (the big <code>&lt;div id="cook-vip-lounge"&gt;</code>
            block you pasted) so it lives natively inside the app.
          </p>
        </div>
      </section>

      <!-- Slots view (Stage 1 placeholder) -->
      <section id="view-slots" class="app-view" data-route="slots">
        <div class="app-card">
          <h1>Slots</h1>
          <p>
            Spin the reels on Cook International’s featured slots.
          </p>
          <p class="placeholder-note">
            Stage 1: placeholder. Next stage, we’ll embed your Cook International Slots
            HTML/JS here so it uses the same shared wallet as the other games.
          </p>
        </div>
      </section>

      <!-- Race Track view (Stage 1 placeholder) -->
      <section id="view-race-track" class="app-view" data-route="race-track">
        <div class="app-card">
          <h1>Cook Downs Virtual Race Track</h1>
          <p>
            Bet on the virtual horses and watch them thunder down the track at Cook Downs.
          </p>
          <p class="placeholder-note">
            Stage 1: placeholder. Next stage we’ll drop in your fully working
            Cook Downs race track code (the sprite canvas version that now correctly
            debits/credits via the shared wallet and Apps Script).
          </p>
        </div>
      </section>

      <!-- Footer-only “legal” views will be added in later stages:
           Terms & Conditions, Privacy Policy, Account Security, Game Rules,
           Rewards Program, Eligible Jurisdictions, Licensing & Regulatory,
           Have a Gambling Problem? -->
    </main>

    <footer id="app-footer" class="app-footer">
      <div class="footer-inner">
        <div class="footer-legal">
          <!-- Footer-only pages: reachable from footer, not top nav -->
          <a href="#terms" data-route-link="terms">Terms &amp; Conditions</a>
          <a href="#privacy" data-route-link="privacy">Privacy Policy</a>
          <a href="#account-security" data-route-link="account-security">Account Security</a>
          <a href="#game-rules" data-route-link="game-rules">Game Rules</a>
          <a href="#rewards-program" data-route-link="rewards-program">Rewards Program</a>
          <a href="#eligible-jurisdictions" data-route-link="eligible-jurisdictions">Eligible Jurisdictions</a>
          <a href="#licensing-regulatory" data-route-link="licensing-regulatory">Licensing &amp; Regulatory</a>
          <a href="#responsible-gaming" data-route-link="responsible-gaming">Have a Gambling Problem?</a>
        </div>
        <div class="footer-credit">
          Powered by
          <a href="https://cook-technology.cook-international.com/" target="_blank" rel="noopener">
            Cook Technology Services
          </a>.
          Copyright © 2025. All Rights Reserved.
        </div>
      </div>
    </footer>
  </div>

  <script>
    (function () {
      // ---- Helpers ----
      function is21Verified() {
        return localStorage.getItem("cook21Verified") === "true";
      }

      function set21Verified(dobIso) {
        localStorage.setItem("cook21Verified", "true");
        if (dobIso) {
          localStorage.setItem("cook21Dob", dobIso);
        }
      }

      function isLoggedIn() {
        return localStorage.getItem("cookPlayerLoggedIn") === "true";
      }

      function calcAge(year, month, day) {
        const dob = new Date(year, month - 1, day);
        if (isNaN(dob.getTime())) return 0;
        const today = new Date();
        let age = today.getFullYear() - dob.getFullYear();
        const m = today.getMonth() - dob.getMonth();
        if (m < 0 || (m === 0 && today.getDate() < dob.getDate())) {
          age--;
        }
        return age;
      }

      function defaultRoute() {
        return isLoggedIn() ? "vip-lounge" : "player-account";
      }

      function getRouteFromHash() {
        if (!location.hash) return null;
        const raw = location.hash.replace("#", "").trim();
        return raw || null;
      }

      function showView(route) {
        const views = document.querySelectorAll(".app-view");
        const navLinks = document.querySelectorAll("[data-route-link]");

        views.forEach((view) => {
          const r = view.getAttribute("data-route");
          view.classList.toggle("active", r === route);
        });

        navLinks.forEach((link) => {
          const r = link.getAttribute("data-route-link");
          if (!r) return;
          if (link.closest(".app-nav")) {
            link.classList.toggle("active", r === route);
          } else {
            // footer links don't get "active" style
            link.classList.remove("active");
          }
        });
      }

      function navigateTo(route) {
        if (!is21Verified()) {
          // If user hasn’t passed age gate, show gate and ignore route
          applyAgeGateState();
          return;
        }
        if (!route) route = defaultRoute();
        showView(route);
        if (location.hash.replace("#", "") !== route) {
          history.replaceState({ route: route }, "", "#" + route);
        }
      }

      function applyAgeGateState() {
        const overlay = document.getElementById("age-gate-overlay");
        const header = document.getElementById("app-header");
        const main = document.getElementById("app-main");
        const footer = document.getElementById("app-footer");

        if (is21Verified()) {
          overlay.classList.add("hidden");
          header.style.display = "";
          main.style.display = "";
          footer.style.display = "";
          navigateTo(getRouteFromHash() || defaultRoute());
        } else {
          overlay.classList.remove("hidden");
          header.style.display = "none";
          main.style.display = "none";
          footer.style.display = "none";
        }
      }

      // ---- Init on DOM ready ----
      document.addEventListener("DOMContentLoaded", function () {
        // Register SW
        if ("serviceWorker" in navigator) {
          window.addEventListener("load", function () {
            navigator.serviceWorker
              .register("/service-worker.js")
              .catch(function (err) {
                console.warn("Service worker registration failed:", err);
              });
          });
        }

        // Wire up nav + footer links
        const routeLinks = document.querySelectorAll("[data-route-link]");
        routeLinks.forEach(function (link) {
          link.addEventListener("click", function (e) {
            e.preventDefault();
            const route = link.getAttribute("data-route-link");
            navigateTo(route);
          });
        });

        // Age gate form
        const ageForm = document.getElementById("age-gate-form");
        const monthEl = document.getElementById("dob-month");
        const dayEl = document.getElementById("dob-day");
        const yearEl = document.getElementById("dob-year");
        const certEl = document.getElementById("dob-cert-checkbox");
        const errorEl = document.getElementById("age-gate-error");

        if (ageForm) {
          ageForm.addEventListener("submit", function (e) {
            e.preventDefault();
            errorEl.textContent = "";

            const month = parseInt(monthEl.value, 10);
            const day = parseInt(dayEl.value, 10);
            const year = parseInt(yearEl.value, 10);

            if (!month || !day || !year) {
              errorEl.textContent = "Please enter your full date of birth.";
              return;
            }

            if (!certEl.checked) {
              errorEl.textContent = "You must certify that you meet the eligibility requirements.";
              return;
            }

            const age = calcAge(year, month, day);
            if (age < 21) {
              errorEl.textContent = "Access denied. You must be at least 21 years of age.";
              return;
            }

            const dobIso = new Date(year, month - 1, day).toISOString().slice(0, 10);
            set21Verified(dobIso);
            applyAgeGateState();
          });
        }

        // Hash-based routing
        window.addEventListener("hashchange", function () {
          if (!is21Verified()) {
            applyAgeGateState();
            return;
          }
          const route = getRouteFromHash() || defaultRoute();
          navigateTo(route);
        });

        // Initial state
        applyAgeGateState();
      });
    })();
  </script>
</body>
</html>
